<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Time Regulus</title>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R7PW7DY4GF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-R7PW7DY4GF');
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="stylesheet" href="style.css">

  <style>
    @keyframes riseInLong {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes riseInShort {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .rise-in-long { animation: riseInLong 1s ease-out forwards; }
    .rise-in-short { animation: riseInShort 1s ease-out forwards; }

    /* æ¨™æº–æ™‚åˆ»ãŒä¸Šã®æ™‚ã®00ç§’ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .seconds-fixed-00 {
      /* inputè¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãã—ã¦ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®æ ã‚’æ¶ˆã—ã€èƒŒæ™¯è‰²ã‚’é©ç”¨ */
      background-color: var(--bg-dark-navy) !important; 
      border: 1px solid var(--accent) !important;
      color: var(--error-late-color) !important; /* èµ¤è‰²æ–‡å­— */
      font-weight: bold;
      pointer-events: none;
      text-align: center;
      box-shadow: none;
      -webkit-appearance: none; /* Safari/Chrome */
      -moz-appearance: none;    /* Firefox */
      appearance: none;         /* æ¨™æº– */
    }
  </style>
</head>
<body class="fade-in">
  <div id="lockScreen">
    <h1 class="fkz rise-in-long">Time Regulus</h1>
    <p class="subtitle">ã‚¿ã‚¤ãƒ ã€€ãƒ¬ã‚°ãƒ«ã‚¹ã€€v2.0.0</p>
    <label for="passcode">æš—è¨¼ç•ªå·ã‚’å…¥åŠ›ï¼š</label><br>
    <input type="password" id="passcode" placeholder="ä¾‹ï¼š1234" tabindex="1">
    <button class="action-btn" onclick="checkPass()" tabindex="2">é–‹ã</button>

    <div id="keypad" class="keypad-grid"></div>

    <p id="error"></p>
    <p class="subtitle">- produced by H.Fukazu -</p>

    <p class="info-link" onclick="showInformationPage()"> - Information - </p>

  </div>


  <div id="modeSelect" style="display:none; text-align:center;">
    <h1 class="fkz rise-in-short">Time Regulus</h1>

<div id="updateNotification" style="display:none; position:fixed; bottom:0; left:0; width:100%; padding:10px 15px; background-color:#ff9800; color:white; text-align:center; z-index:1000;">
    æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ï¼
    <button id="updateButton" style="margin-left:15px; padding:5px 10px; background-color:white; color:#0e0f11; border:none; border-radius:4px; font-weight:bold; cursor:pointer;">
        æ›´æ–°ã—ã¦å†èµ·å‹•
    </button>
</div>

    <p class="subtitle">- ãƒ¢ãƒ¼ãƒ‰é¸æŠ -</p>
    <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 40px;">
      <button class="action-btn" onclick="showErrorMode()" tabindex="3">èª¤å·®ã®è¨ˆç®—</button>
      <button class="action-btn" onclick="showCorrectionMode()" tabindex="4">è£œæ­£æ™‚åˆ»ã®è¨ˆç®—</button>
    </div><br><br>
    <a href="#" 
  onclick="showResetConfirmation(); return false;" 
  id="resetLink" 
  class="mode-select-link">å…¥åŠ›æƒ…å ±ã®ãƒªã‚»ãƒƒãƒˆ</a>
<div id="resetConfirmContainer" style="display:none; margin-top: 15px;">
  <button class="action-btn" 
    onclick="resetAppAndReturnToLock()" 
    style="background-color: var(--toggle-bg); box-shadow: 0 4px 12px rgba(255, 0, 170, 0.3); font-size: 14px; padding: 10px 20px;">å…¥åŠ›æƒ…å ±ã‚’æ¶ˆå»ã—ã¦åˆæœŸç”»é¢ã«æˆ»ã‚Šã¾ã™</button>
</div>
    <br><br><br><br>
    
  </div>

  <div id="errorMode" style="display:none;">
    <div class="mode-card">
      <button class="back-btn" onclick="backToModeSelect()">â† ãƒ¢ãƒ¼ãƒ‰é¸æŠã«æˆ»ã‚‹</button>
      <h2>èª¤å·®ã®è¨ˆç®—</h2>

      <div id="errorModeDisplayInputGroup" class="input-group">
        <label>è¡¨ç¤ºæ™‚åˆ»ï¼š</label><br>
        <input type="datetime-local" id="displayTime">
        <select id="displaySeconds" class="seconds-select">
          <option value="">ç§’</option>
        </select>
      </div>

      <div id="swap-button-wrapper" style="text-align: center; margin: 10px 0; position: relative;">
    <button id="swapButton" class="action-btn toggle-btn swap-btn" onclick="swapErrorModeInputs()">ğŸ”ƒ</button>
</div>

      <div id="errorModeStandardInputGroup" class="input-group">
        <label>æ¨™æº–æ™‚åˆ»ï¼š</label>
        <button class="action-btn" id="standardNowButton" onclick="setNowToStandard()" style="margin-left: 8px;">NOWğŸ”„</button><br>
        <input type="datetime-local" id="standardTime">
        <select id="standardSeconds" class="seconds-select">
          <option value="">ç§’</option>
        </select>
      </div>

      <div class="result-box" id="result"></div>
      <div style="text-align: right;">
        <div id="toReverseButton" 
     onclick="switchToCorrectionMode()" 
     class="to-reverse-link" 
     style="display: none;">
    è£œæ­£æ™‚åˆ»ã‚’è¨ˆç®—â†’
</div>
      </div>
    </div>
  </div>

  <div id="correctionMode" class="mode-card deep-green" style="display:none;">
    <button class="back-btn" onclick="backToModeSelect()" tabindex="12">â† ãƒ¢ãƒ¼ãƒ‰é¸æŠã«æˆ»ã‚‹</button>
    <h2>è£œæ­£æ™‚åˆ»ã®è¨ˆç®—</h2>
    <label>è£œæ­£ã«ä½¿ã†èª¤å·®ï¼š</label>
    <div class="flex-wrap">
      <div class="unit-input">
        <input type="number" id="errorDays" min="0" step="1" tabindex="13">
        <span class="unit-label">æ—¥</span>
      </div>
      <div class="unit-input">
        <select id="errorHours" tabindex="14">
          <option value="">--</option>
        </select>
        <span class="unit-label">æ™‚</span>
      </div>
      <div class="unit-input">
        <select id="errorMinutes" tabindex="15">
          <option value="">--</option>
        </select>
        <span class="unit-label">åˆ†</span>
      </div>
      <div class="unit-input">
        <select id="errorSeconds" tabindex="16">
          <option value="">--</option>
        </select>
        <span class="unit-label">ç§’</span>
      </div>
    </div>

    <div class="input-group">
      <label for="errorDirection" style="display:inline-block;">è¡¨ç¤ºæ™‚åˆ»ã¯æ¨™æº–æ™‚åˆ»ã‚ˆã‚Šï¼š</label>
      <select id="errorDirection" tabindex="17">
        <option value="late" class="error-late">é€²ã‚“ã§ã„ã‚‹</option>
        <option value="early" class="error-early">é…ã‚Œã¦ã„ã‚‹</option>
      </select>
    </div>

    <div style="margin: 12px 0;">
      <button class="action-btn toggle-btn active-toggle" id="reverseModeToggleBtn" onclick="toggleReverseMode()">â‡†åˆ‡æ›¿</button>
    </div>

    <div id="reverseTimeBlock" class="input-group">
      <label id="reverseTimeLabel" for="reverseDisplayTime">è¡¨ç¤ºæ™‚åˆ»:</label><br>
      <input type="datetime-local" id="reverseDisplayTime" step="60" tabindex="19">
      <select id="reverseDisplaySeconds" class="seconds-select" tabindex="20">
        <option value="">--</option>
      </select>
    </div>

    <div id="reverseResult" class="result-box"></div>
    
    <div style="display: flex; flex-direction: column; align-items: center; margin-top: 10px;">
      <button class="action-btn" id="addToListButton" onclick="addResultToList()">çµæœä¸€è¦§ã«è¨˜éŒ²ã™ã‚‹</button>
      <span id="recordSuccessMessage" class="success-message" style="display:none; color: var(--accent); font-weight: bold; font-size: 15px; margin-top: 10px;">çµæœä¸€è¦§ã«è¿½åŠ ã—ã¾ã—ãŸ</span>
    </div>

    <p id="showListLink" class="show-list-link" onclick="showResultList()" style="display:none; text-align: right; margin-top: 20px;">çµæœä¸€è¦§ã‚’è¡¨ç¤º â†’</p>
  </div>

  <div id="resultListPage" style="display:none; text-align:center; padding: 40px 16px;"><br><br>
    <button class="back-btn" onclick="backToCorrectionMode()">â† è£œæ­£æ™‚åˆ»ã®è¨ˆç®—ã«æˆ»ã‚‹</button>
    <h1 class="fkz" style="margin-top: 40px;">çµæœä¸€è¦§</h1>
    <div id="resultListContainer" style="margin-top: 30px;"></div>
  </div>

  <div id="informationPage" style="display:none; text-align:center; padding: 40px 16px;"><br>
    <button class="back-btn" onclick="backToLockScreen()">â† åˆæœŸç”»é¢ã«æˆ»ã‚‹</button>
    <h1 class="fkz" style="margin-top: 40px;">Information</h1>
    <div id="informationContent" style="margin-top: 30px; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto;">
      <p style="margin-bottom: 8px;">ã“ã®ã‚¢ãƒ—ãƒªã¯ <strong>H.Fukazu</strong> ã«ã‚ˆã£ã¦åˆ¶ä½œã•ã‚Œã¾ã—ãŸã€‚</p>
      <p style="margin-bottom: 24px;">ãƒãƒ¼ã‚¸ãƒ§ãƒ³: <strong>v2.0.0</strong></p>

      <h3 style="margin-top:24px;">## è‘—ä½œæ¨©ãŠã‚ˆã³åˆ©ç”¨è¦ç´„ (Copyright and Usage Policy)</h3>
      <p>æœ¬ä½œå“ï¼ˆã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã€ã‚³ãƒ¼ãƒ‰ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãŠã‚ˆã³é–¢é€£ã™ã‚‹å…¨ã¦ã®å†…å®¹ã‚’å«ã‚€ï¼‰ã®è‘—ä½œæ¨©ã¯ã€Â© 2025 H.Fukazu ã«å¸°å±ã—ã¾ã™ã€‚<br>**Â© 2025 H.Fukazu. All Rights Reserved.**</p><br>
      <h3 style="margin-top:24px;"> å³ç¦äº‹é … (Strictly Prohibited)</h3>
      <p>è‘—ä½œè€…ã‹ã‚‰ã®æ›¸é¢ã«ã‚ˆã‚‹äº‹å‰ã®æ˜ç¤ºçš„ãªè¨±å¯ãªãã€ä»¥ä¸‹ã®è¡Œç‚ºã‚’å›ºãç¦ã˜ã¾ã™ã€‚</p>
      <ul>
        <li>ç„¡æ–­è»¢ç”¨ã€è¤‡è£½ã€æ”¹å¤‰ã€äºŒæ¬¡åˆ©ç”¨ã¯ç¦æ­¢</li>
        <li>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å…¨éƒ¨ã¾ãŸã¯ä¸€éƒ¨ã®ç„¡æ–­è»¢è¼‰ãŠã‚ˆã³å†é…å¸ƒã®ç¦æ­¢</li>
        <li>å•†æ¥­çš„ãªç›®çš„ã§ã®åˆ©ç”¨ç¦æ­¢ (å–¶åˆ©ãƒ»éå–¶åˆ©ã‚’å•ã‚ãšã€å¯¾ä¾¡ã‚’å¾—ã‚‹æ´»å‹•ã¸ã®åˆ©ç”¨)</li>
        <li>æœ¬ä½œå“ã‚’åŸºã«ã—ãŸæ´¾ç”Ÿä½œå“ã®ä½œæˆãŠã‚ˆã³å…¬é–‹ã‚‚ç¦æ­¢</li>
      </ul>
      <p>æœ¬ä½œå“ã¯ã€è‘—ä½œæ¨©æ³•ã«ã‚ˆã£ã¦æœ€å¤§é™ã«ä¿è­·ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
    </div>
    <button class="action-btn" onclick="showQRCodePage()" style="margin-top: 30px;">QRã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</button>
  </div>
  
  <div id="qrCodePage" style="display:none; text-align:center; padding: 40px 16px;">
    <div style="margin-top: 100px;">
      <img id="qrCodeImage" 
           src="QRCorde.PNG" 
           alt="Time Regulus QR Code" 
           style="border: 4px solid var(--text-main); border-radius: 8px;">
    </div>
    <button class="action-btn" onclick="closeQRCodePage()" style="margin-top: 40px; background-color: #ff4d4d;">â˜’ é–‰ã˜ã‚‹</button>
  </div>

  <script src="script.js" defer></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("Service Worker registered"))
        .catch(error => console.error("Service Worker registration failed:", error));
    }
  </script>

<script>
      // Service Workerã®ç™»éŒ²
      if ('serviceWorker' in navigator) {
        // ãƒšãƒ¼ã‚¸ãŒå®Œå…¨ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå¾Œã§Service Workerã‚’ç™»éŒ²ã™ã‚‹
        window.addEventListener('load', () => {
          // 'service-worker.js'ã‚’ç™»éŒ²ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«åã¯å¤‰æ›´ã—ãªã„ã§ãã ã•ã„ã€‚
          navigator.serviceWorker.register('./service-worker.js')
            .then(registration => {
              console.log('Service Worker ç™»éŒ²æˆåŠŸ:', registration.scope);
            })
            .catch(error => {
              console.log('Service Worker ç™»éŒ²å¤±æ•—:', error);
            });
        });
      }
    </script>

</body>
</html>